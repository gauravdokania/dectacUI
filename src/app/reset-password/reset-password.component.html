<div class="container col-md-6 offset-md-3 mt-5">
    <div *ngIf="error" class="alert alert-danger">{{error}}</div>
    <div *ngIf="success" class="alert alert-success">{{success}}</div>
    <div class="card">
        <h4 class="card-header">Change Password</h4>
        <div class="card-body">
            <form [formGroup]="form" (ngSubmit)="changePassword()">
                <div class="mb-3">
                    <label class="form-label">Old Password</label>
                    <input matInput [type]="showPasswordOld ? 'text' : 'password'" class="form-control" formControlName="oldPassword" [ngClass]="{ 'is-invalid': submitted && f.oldPassword.errors }" />
                    <mat-icon matSuffix (click)="togglePasswordVisibility('oldPassword')" style="position: absolute; margin-top: -25px; margin-right: 20px; right: 0;">
                        {{showPasswordOld?'visibility_off':'visibility'}}
                    </mat-icon>
                    <div *ngIf="submitted && f.oldPassword.errors" class="invalid-feedback">
                        <div *ngIf="f.oldPassword.errors.required">Old Username is required</div>
                    </div>
                </div>
                <div class="mb-3">
                    <label class="form-label">New Password</label>
                    <input matInput [type]="showPasswordNew ? 'text' : 'password'" class="form-control" formControlName="newPassword" [ngClass]="{ 'is-invalid': submitted && f.newPassword.errors }" />
                    <mat-icon matSuffix (click)="togglePasswordVisibility('newPassword')" style="position: absolute; margin-top: -25px; margin-right: 20px; right: 0;">
                        {{showPasswordNew?'visibility_off':'visibility'}}
                    </mat-icon>
                    <div *ngIf="submitted && f.newPassword.errors" class="invalid-feedback">
                        <div *ngIf="f.newPassword.errors.required">New Password is required</div>
                    </div>
                </div>
                <div class="mb-3">
                    <label class="form-label">Confirm Password</label>
                    <input matInput [type]="showPasswordConfirm ? 'text' : 'password'" class="form-control" formControlName="confirmPassword" [ngClass]="{ 'is-invalid': submitted && f.confirmPassword.errors }" />
                    <mat-icon matSuffix (click)="togglePasswordVisibility('confirmPassword')" style="position: absolute; margin-top: -25px; margin-right: 20px; right: 0;">
                        {{showPasswordConfirm?'visibility_off':'visibility'}}
                    </mat-icon>
                    <div *ngIf="submitted && f.confirmPassword.errors" class="invalid-feedback">
                        <div *ngIf="f.confirmPassword.errors.required">Confirm Password is required</div>
                    </div>
                </div>
                <div>
                    <button [disabled]="loading" class="btn btn--secondary btn--general-cta">
                        <span *ngIf="loading" class="spinner-border spinner-border-sm me-1"></span>
                        Change Password
                    </button>
                </div>
            </form>
        </div>
    </div>
  </div>